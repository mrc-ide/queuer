<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Base class for queues — queue_base • queuer</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Base class for queues — queue_base"><meta property="og:description" content="A base class, on top of which queues can be
developed. This includes all methods except for support for
actually submitting tasks."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">queuer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mrc-ide/queuer/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Base class for queues</h1>
    <small class="dont-index">Source: <a href="https://github.com/mrc-ide/queuer/blob/HEAD/R/queue_base.R" class="external-link"><code>R/queue_base.R</code></a></small>
    <div class="hidden name"><code>queue_base.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A base class, on top of which queues can be
developed. This includes all methods except for support for
actually submitting tasks.</p>
    </div>


    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>context</code></dt>
<dd><p>The context object</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-queue_base-new"><code>queue_base$new()</code></a></p></li>
<li><p><a href="#method-queue_base-initialize_context"><code>queue_base$initialize_context()</code></a></p></li>
<li><p><a href="#method-queue_base-task_list"><code>queue_base$task_list()</code></a></p></li>
<li><p><a href="#method-queue_base-task_status"><code>queue_base$task_status()</code></a></p></li>
<li><p><a href="#method-queue_base-task_times"><code>queue_base$task_times()</code></a></p></li>
<li><p><a href="#method-queue_base-task_get"><code>queue_base$task_get()</code></a></p></li>
<li><p><a href="#method-queue_base-task_result"><code>queue_base$task_result()</code></a></p></li>
<li><p><a href="#method-queue_base-task_delete"><code>queue_base$task_delete()</code></a></p></li>
<li><p><a href="#method-queue_base-task_bundle_list"><code>queue_base$task_bundle_list()</code></a></p></li>
<li><p><a href="#method-queue_base-task_bundle_info"><code>queue_base$task_bundle_info()</code></a></p></li>
<li><p><a href="#method-queue_base-task_bundle_get"><code>queue_base$task_bundle_get()</code></a></p></li>
<li><p><a href="#method-queue_base-task_bundle_retry_failed"><code>queue_base$task_bundle_retry_failed()</code></a></p></li>
<li><p><a href="#method-queue_base-enqueue"><code>queue_base$enqueue()</code></a></p></li>
<li><p><a href="#method-queue_base-enqueue_"><code>queue_base$enqueue_()</code></a></p></li>
<li><p><a href="#method-queue_base-enqueue_bulk"><code>queue_base$enqueue_bulk()</code></a></p></li>
<li><p><a href="#method-queue_base-lapply"><code>queue_base$lapply()</code></a></p></li>
<li><p><a href="#method-queue_base-mapply"><code>queue_base$mapply()</code></a></p></li>
<li><p><a href="#method-queue_base-submit"><code>queue_base$submit()</code></a></p></li>
<li><p><a href="#method-queue_base-unsubmit"><code>queue_base$unsubmit()</code></a></p></li>
</ul></div><p></p><hr><a id="method-queue_base-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Constructor</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/queue_base.html">queue_base</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">context_id</span>, root <span class="op">=</span> <span class="cn">NULL</span>, initialize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>context_id</code></dt>
<dd><p>A context identifier; either a context
object or an name/id of a saved context (see
<code><a href="https://rdrr.io/pkg/context/man/context_save.html" class="external-link">context::context_save()</a></code>).</p></dd>


<dt><code>root</code></dt>
<dd><p>Root path to load contexts from, if using a string
identifier for <code>context_id</code>. If <code>context_id</code> is a <code>context</code>
object then <code>root</code> must be <code>NULL</code>.</p></dd>


<dt><code>initialize</code></dt>
<dd><p>Logical, indicating if the context should be
loaded immediately. If you want to run tasks this must be
<code>TRUE</code>, but to query it can be <code>FALSE</code>. See
<code><a href="https://rdrr.io/pkg/context/man/context_load.html" class="external-link">context::context_load()</a></code> and the <code>$initialise_context()</code> method.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-initialize_context"></a><div class="section">
<h3 id="method-initialize-context-">Method <code>initialize_context()</code><a class="anchor" aria-label="anchor" href="#method-initialize-context-"></a></h3>
<p>Load the context. This causes the packages to be
loaded and all script files to be sourced. This is required
before any tasks can be queued, because we need to be check
against this environment to work out what is available on
any workers.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">initialize_context</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-queue_base-task_list"></a><div class="section">
<h3 id="method-task-list-">Method <code>task_list()</code><a class="anchor" aria-label="anchor" href="#method-task-list-"></a></h3>
<p>List all tasks known to this queue</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-queue_base-task_status"></a><div class="section">
<h3 id="method-task-status-">Method <code>task_status()</code><a class="anchor" aria-label="anchor" href="#method-task-status-"></a></h3>
<p>Return the status of selected tasks</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_status</span><span class="op">(</span>task_ids <span class="op">=</span> <span class="cn">NULL</span>, named <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_ids</code></dt>
<dd><p>Task identifiers to query. If <code>NULL</code>, then all
tasks are queried.</p></dd>


<dt><code>named</code></dt>
<dd><p>Logical, indicating if the status result should be
named by by task id.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_times"></a><div class="section">
<h3 id="method-task-times-">Method <code>task_times()</code><a class="anchor" aria-label="anchor" href="#method-task-times-"></a></h3>
<p>Return the times taken by tasks as a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_times</span><span class="op">(</span>task_ids <span class="op">=</span> <span class="cn">NULL</span>, unit_elapsed <span class="op">=</span> <span class="st">"secs"</span>, sorted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_ids</code></dt>
<dd><p>Task identifiers to query. If <code>NULL</code>, then all
tasks are queried.</p></dd>


<dt><code>unit_elapsed</code></dt>
<dd><p>Time unit to use for the elapsed fields</p></dd>


<dt><code>sorted</code></dt>
<dd><p>Logical indicating of the fields should be sorted
by submitted time.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_get"></a><div class="section">
<h3 id="method-task-get-">Method <code>task_get()</code><a class="anchor" aria-label="anchor" href="#method-task-get-"></a></h3>
<p>Retrieve a task by id</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_get</span><span class="op">(</span><span class="va">task_id</span>, check_exists <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_id</code></dt>
<dd><p>A task identifier (hexadecimal string)</p></dd>


<dt><code>check_exists</code></dt>
<dd><p>Logical, indicating if we should check
that the task exists.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_result"></a><div class="section">
<h3 id="method-task-result-">Method <code>task_result()</code><a class="anchor" aria-label="anchor" href="#method-task-result-"></a></h3>
<p>Retrieve a task's result</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_result</span><span class="op">(</span><span class="va">task_id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_id</code></dt>
<dd><p>A task identifier (hexadecimal string)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_delete"></a><div class="section">
<h3 id="method-task-delete-">Method <code>task_delete()</code><a class="anchor" aria-label="anchor" href="#method-task-delete-"></a></h3>
<p>Delete tasks</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_delete</span><span class="op">(</span><span class="va">task_ids</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_ids</code></dt>
<dd><p>A vector of task identifiers (each a
hexadecimal string)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_bundle_list"></a><div class="section">
<h3 id="method-task-bundle-list-">Method <code>task_bundle_list()</code><a class="anchor" aria-label="anchor" href="#method-task-bundle-list-"></a></h3>
<p>List all known task bundles</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_bundle_list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-queue_base-task_bundle_info"></a><div class="section">
<h3 id="method-task-bundle-info-">Method <code>task_bundle_info()</code><a class="anchor" aria-label="anchor" href="#method-task-bundle-info-"></a></h3>
<p>List all known task bundles along with information
about what was run and when.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_bundle_info</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-queue_base-task_bundle_get"></a><div class="section">
<h3 id="method-task-bundle-get-">Method <code>task_bundle_get()</code><a class="anchor" aria-label="anchor" href="#method-task-bundle-get-"></a></h3>
<p>Get a task bundle by name</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_bundle_get</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>A task bundle identifier (a string of the form
<code>adjective_anmimal</code>)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-task_bundle_retry_failed"></a><div class="section">
<h3 id="method-task-bundle-retry-failed-">Method <code>task_bundle_retry_failed()</code><a class="anchor" aria-label="anchor" href="#method-task-bundle-retry-failed-"></a></h3>
<p>Retry failed tasks in a bundle</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">task_bundle_retry_failed</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>A task bundle identifier (a string of the form
<code>adjective_anmimal</code>)</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-enqueue"></a><div class="section">
<h3 id="method-enqueue-">Method <code>enqueue()</code><a class="anchor" aria-label="anchor" href="#method-enqueue-"></a></h3>
<p>Queue a task</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">enqueue</span><span class="op">(</span><span class="va">expr</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>, submit <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>expr</code></dt>
<dd><p>An unevaluated expression to put on the queue</p></dd>


<dt><code>envir</code></dt>
<dd><p>The environment that you would run this expression in
locally. This will be used to copy across any dependent variables.
For example, if your expression is <code>sum(1 + a)</code>, we will also send
the value of <code>a</code> to the worker along with the expression.</p></dd>


<dt><code>submit</code></dt>
<dd><p>Logical indicating if the task should be submitted</p></dd>


<dt><code>name</code></dt>
<dd><p>Optional name for the task</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-enqueue_"></a><div class="section">
<h3 id="method-enqueue--1">Method <code>enqueue_()</code><a class="anchor" aria-label="anchor" href="#method-enqueue--1"></a></h3>
<p>Queue a task</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">enqueue_</span><span class="op">(</span><span class="va">expr</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>, submit <span class="op">=</span> <span class="cn">TRUE</span>, name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>expr</code></dt>
<dd><p>A quoted expression to put on the queue</p></dd>


<dt><code>envir</code></dt>
<dd><p>The environment that you would run this expression in
locally. This will be used to copy across any dependent variables.
For example, if your expression is <code>sum(1 + a)</code>, we will also send
the value of <code>a</code> to the worker along with the expression.</p></dd>


<dt><code>submit</code></dt>
<dd><p>Logical indicating if the task should be submitted</p></dd>


<dt><code>name</code></dt>
<dd><p>Optional name for the task</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-enqueue_bulk"></a><div class="section">
<h3 id="method-enqueue-bulk-">Method <code>enqueue_bulk()</code><a class="anchor" aria-label="anchor" href="#method-enqueue-bulk-"></a></h3>
<p>Send a bulk set of tasks to your workers.
This function is a bit like a mash-up of <a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a> and <a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a>,
when used with a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> argument, which is typically what
is provided. Rather than <code>$lapply()</code> which applies <code>FUN</code> to each
element of <code>X</code>, <code>enqueue_bulk will apply over each row of </code>X<code>, spreading the columms out as arguments. If you have a function </code>f(a, b)<code>and a [data.frame] with columns</code>a<code>and</code>b` this
should feel intuitive.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">enqueue_bulk</span><span class="op">(</span></span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">FUN</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  do_call <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  time_poll <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X</code></dt>
<dd><p>Typically a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>, which you want to apply <code>FUN</code>
over, row-wise. The names of the <code>data.frame</code> must match the
arguments of your function.</p></dd>


<dt><code>FUN</code></dt>
<dd><p>A function</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to add to every call to <code>FUN</code></p></dd>


<dt><code>do_call</code></dt>
<dd><p>Logical, indicating if each row of <code>X</code> should be
treated as if it was <code>do.call(FUN, X[i, ])</code> - typically this is what
you want.</p></dd>


<dt><code>envir</code></dt>
<dd><p>The environment to use to try and find the function</p></dd>


<dt><code>timeout</code></dt>
<dd><p>Optional timeout, in seconds, after which an
error will be thrown if the task has not completed.</p></dd>


<dt><code>time_poll</code></dt>
<dd><p>Optional time with which to "poll" for
completion.</p></dd>


<dt><code>progress</code></dt>
<dd><p>Optional logical indicating if a progress bar
should be displayed. If <code>NULL</code> we fall back on the value of the
global option <code>rrq.progress</code>, and if that is unset display a
progress bar if in an interactive session.</p></dd>


<dt><code>name</code></dt>
<dd><p>Optional name for a created bundle</p></dd>


<dt><code>overwrite</code></dt>
<dd><p>Logical, indicating if we should overwrite any
bundle that exists with name <code>name</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-lapply"></a><div class="section">
<h3 id="method-lapply-">Method <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code><a class="anchor" aria-label="anchor" href="#method-lapply-"></a></h3>
<p>Apply a function over a list of data. This is
equivalent to using <code>$enqueue()</code> over each element in the list.</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">lapply</span><span class="op">(</span></span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">FUN</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  time_poll <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>X</code></dt>
<dd><p>A list of data to apply our function against</p></dd>


<dt><code>FUN</code></dt>
<dd><p>A function to be applied to each element of <code>X</code></p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to add to every call to <code>FUN</code></p></dd>


<dt><code>envir</code></dt>
<dd><p>The environment to use to try and find the function</p></dd>


<dt><code>timeout</code></dt>
<dd><p>Optional timeout, in seconds, after which an
error will be thrown if the task has not completed.</p></dd>


<dt><code>time_poll</code></dt>
<dd><p>Optional time with which to "poll" for
completion.</p></dd>


<dt><code>progress</code></dt>
<dd><p>Optional logical indicating if a progress bar
should be displayed. If <code>NULL</code> we fall back on the value of the
global option <code>rrq.progress</code>, and if that is unset display a
progress bar if in an interactive session.</p></dd>


<dt><code>name</code></dt>
<dd><p>Optional name for a created bundle</p></dd>


<dt><code>overwrite</code></dt>
<dd><p>Logical, indicating if we should overwrite any
bundle that exists with name <code>name</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-mapply"></a><div class="section">
<h3 id="method-mapply-">Method <code><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply()</a></code><a class="anchor" aria-label="anchor" href="#method-mapply-"></a></h3>
<p>A wrapper like <code>mapply</code></p>

<p>Send a bulk set of tasks to your workers.
This function is a bit like a mash-up of <a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a> and <a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a>,
when used with a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> argument, which is typically what
is provided. Rather than <code>$lapply()</code> which applies <code>FUN</code> to each
element of <code>X</code>, <code>enqueue_bulk will apply over each row of </code>X<code>, spreading the columms out as arguments. If you have a function </code>f(a, b)<code>and a [data.frame] with columns</code>a<code>and</code>b` this
should feel intuitive.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">mapply</span><span class="op">(</span></span>
<span>  <span class="va">FUN</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  MoreArgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  time_poll <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>FUN</code></dt>
<dd><p>A function</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to add to every call to <code>FUN</code></p></dd>


<dt><code>MoreArgs</code></dt>
<dd><p>As for <a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a>, additional arguments that apply
to every function call.</p></dd>


<dt><code>envir</code></dt>
<dd><p>The environment to use to try and find the function</p></dd>


<dt><code>timeout</code></dt>
<dd><p>Optional timeout, in seconds, after which an
error will be thrown if the task has not completed.</p></dd>


<dt><code>time_poll</code></dt>
<dd><p>Optional time with which to "poll" for
completion.</p></dd>


<dt><code>progress</code></dt>
<dd><p>Optional logical indicating if a progress bar
should be displayed. If <code>NULL</code> we fall back on the value of the
global option <code>rrq.progress</code>, and if that is unset display a
progress bar if in an interactive session.</p></dd>


<dt><code>name</code></dt>
<dd><p>Optional name for a created bundle</p></dd>


<dt><code>use_names</code></dt>
<dd><p>Use names</p></dd>


<dt><code>overwrite</code></dt>
<dd><p>Logical, indicating if we should overwrite any
bundle that exists with name <code>name</code>.</p></dd>


<dt><code>X</code></dt>
<dd><p>Typically a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>, which you want to apply <code>FUN</code>
over, row-wise. The names of the <code>data.frame</code> must match the
arguments of your function.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-submit"></a><div class="section">
<h3 id="method-submit-">Method <code>submit()</code><a class="anchor" aria-label="anchor" href="#method-submit-"></a></h3>
<p>Submit a task into a queue. This is a stub
method and must be overridden by a derived class for the queue
to do anything.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">submit</span><span class="op">(</span><span class="va">task_ids</span>, names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_ids</code></dt>
<dd><p>Vector of tasks to submit</p></dd>


<dt><code>names</code></dt>
<dd><p>Optional vector of names of tasks</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-queue_base-unsubmit"></a><div class="section">
<h3 id="method-unsubmit-">Method <code>unsubmit()</code><a class="anchor" aria-label="anchor" href="#method-unsubmit-"></a></h3>
<p>Unsubmit a task from the queue.  This is a stub
method and must be overridden by a derived class for the queue
to do anything.</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">queue_base</span><span class="op">$</span><span class="fu">unsubmit</span><span class="op">(</span><span class="va">task_ids</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>task_ids</code></dt>
<dd><p>Vector of tasks to submit</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

